{"seeAlsoSections":[{"identifiers":["doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Request","doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Response","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouteCollection","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGroup"],"title":"Related Documentation","anchor":"Related-Documentation"},{"identifiers":["doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestDecoding","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ResponseEncoding","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestContexts","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MiddlewareGuide","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ErrorHandling","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/LoggingMetricsAndTracing","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterBuilderGuide","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServerProtocol","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServiceLifecycle","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Testing","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/PersistentData","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MigratingToV2"],"title":"Hummingbird Server","anchor":"Hummingbird-Server","generated":true}],"abstract":[{"type":"text","text":"The router directs requests to their handlers based on the contents of their path."}],"metadata":{"role":"article","images":[{"identifier":"logo.png","type":"icon"}],"title":"Router","roleHeading":"Article"},"hierarchy":{"paths":[["doc:\/\/com.opticalaberration.hummingbird\/documentation\/index"]]},"kind":"article","schemaVersion":{"major":0,"minor":3,"patch":0},"identifier":{"url":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGuide","interfaceLanguage":"swift"},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","type":"heading","anchor":"Overview","level":2},{"inlineContent":[{"text":"The default router that comes with Hummingbird uses a Trie based lookup. Routes are added using the function ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/on(_:method:use:)","isActive":true,"type":"reference"},{"text":". You provide the URI path, the method and the handler function. Below is a simple route which returns “Hello” in the body of the response.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["let router = Router()","router.on(\"\/hello\", method: .GET) { request, context in","    return \"Hello\"","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"If you don’t provide a path then the default is for it to be “\/”."}],"type":"paragraph"},{"text":"Methods","type":"heading","anchor":"Methods","level":3},{"inlineContent":[{"type":"text","text":"There are shortcut functions for the most common HTTP methods. The above can be written as"}],"type":"paragraph"},{"type":"codeListing","code":["let router = Router()","router.get(\"\/hello\") { request, context in","    return \"Hello\"","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"There are shortcuts for "},{"code":"put","type":"codeVoice"},{"type":"text","text":", "},{"code":"post","type":"codeVoice"},{"type":"text","text":", "},{"code":"head","type":"codeVoice"},{"type":"text","text":", "},{"code":"patch","type":"codeVoice"},{"type":"text","text":" and "},{"code":"delete","type":"codeVoice"},{"type":"text","text":" as well."}],"type":"paragraph"},{"text":"Response generators","type":"heading","anchor":"Response-generators","level":3},{"inlineContent":[{"text":"Route handlers are required to return a type conforming to the ","type":"text"},{"code":"ResponseGenerator","type":"codeVoice"},{"text":" protocol. The ","type":"text"},{"code":"ResponseGenerator","type":"codeVoice"},{"text":" protocol requires a type to be able to generate an ","type":"text"},{"code":"Response","type":"codeVoice"},{"text":". For example ","type":"text"},{"code":"String","type":"codeVoice"},{"text":" has been extended to conform to ","type":"text"},{"code":"ResponseGenerator","type":"codeVoice"},{"text":" by returning an ","type":"text"},{"code":"Response","type":"codeVoice"},{"text":" with status ","type":"text"},{"code":".ok","type":"codeVoice"},{"text":",  a content-type header of ","type":"text"},{"code":"text-plain","type":"codeVoice"},{"text":" and a body holding the contents of the ","type":"text"},{"code":"String","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/\/ Extend String to conform to ResponseGenerator","extension String: ResponseGenerator {","    \/\/\/ Generate response holding string","    public func response(from request: Request, context: some RequestContext) -> Response {","        let buffer = ByteBuffer(string: self)","        return Response(","            status: .ok,","            headers: [.contentType: \"text\/plain; charset=utf-8\"],","            body: .init(byteBuffer: buffer)","        )","    }","}"],"syntax":"swift"},{"inlineContent":[{"text":"In addition to ","type":"text"},{"code":"String","type":"codeVoice"},{"text":" ","type":"text"},{"code":"ByteBuffer","type":"codeVoice"},{"text":", ","type":"text"},{"code":"HTTPResponseStatus","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"Optional","type":"codeVoice"},{"text":" have also been extended to conform to ","type":"text"},{"code":"ResponseGenerator","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"It is also possible to extend "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" objects to generate a "},{"type":"codeVoice","code":"Response"},{"type":"text","text":" by conforming these objects to "},{"isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ResponseEncodable","type":"reference"},{"type":"text","text":". The object will use the response encoder attached to your context to encode these objects. If an object conforms to "},{"type":"codeVoice","code":"ResponseEncodable"},{"type":"text","text":" then also so do arrays and dictionaries of these objects. Read more about generating "},{"type":"codeVoice","code":"Response"},{"type":"text","text":"s via "},{"type":"codeVoice","code":"Codable"},{"type":"text","text":" in "},{"isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ResponseEncoding","type":"reference"},{"type":"text","text":"."}],"type":"paragraph"},{"text":"Wildcards","type":"heading","anchor":"Wildcards","level":3},{"inlineContent":[{"type":"text","text":"You can use wildcards to match sections of a path component."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"A single "},{"type":"codeVoice","code":"*"},{"type":"text","text":" will skip one path component"}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/files\/*\") { request, context in","    return request.uri.description","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"Will match"}],"type":"paragraph"},{"type":"codeListing","code":["GET \/files\/test","GET \/files\/test2"],"syntax":null},{"inlineContent":[{"text":"A ","type":"text"},{"code":"*","type":"codeVoice"},{"text":" at the start of a route component will match all path components with the same suffix.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/files\/*.jpg\") { request, context in","    return request.uri.description","}"],"syntax":"swift"},{"inlineContent":[{"text":"Will work for","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["GET \/files\/test.jpg","GET \/files\/test2.jpg"],"syntax":null},{"inlineContent":[{"text":"A ","type":"text"},{"type":"codeVoice","code":"*"},{"text":" at the end of a route component will match all path components with the same prefix.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/files\/image.*\") { request, context in","    return request.uri.description","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"Will work for"}],"type":"paragraph"},{"type":"codeListing","code":["GET \/files\/image.jpg","GET \/files\/image.png"],"syntax":null},{"inlineContent":[{"type":"text","text":"A "},{"type":"codeVoice","code":"**"},{"type":"text","text":" will match and capture all remaining path components."}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/files\/**\") { request, context in","    \/\/ return catchAll captured string","    return context.parameters.getCatchAll().joined(separator: \"\/\")","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"The above will match routes and respond as follows"}],"type":"paragraph"},{"type":"codeListing","code":["GET \/files\/image.jpg returns \"image.jpg\" in the response body","GET \/files\/folder\/image.png returns \"folder\/image.png\" in the response body"],"syntax":null},{"text":"Parameter Capture","type":"heading","anchor":"Parameter-Capture","level":3},{"inlineContent":[{"type":"text","text":"You can extract parameters out of the URI by prefixing the path with a colon. This indicates that this path section is a parameter. The parameter name is the string following the colon. You can get access to the URI extracted parameters from the context. This example extracts an id from the URI and uses it to return a specific user. so “\/user\/56” will return user with id 56."}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/user\/:id\") { request, context in","    let id = context.parameters.get(\"id\", as: Int.self) else { throw HTTPError(.badRequest) }","    return getUser(id: id)","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"In the example above if I fail to access the parameter as an "},{"type":"codeVoice","code":"Int"},{"type":"text","text":" then I throw an error. If you throw an "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPError"},{"type":"text","text":" it will get converted to a valid HTTP response."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The parameter name in your route can also be of the form "},{"type":"codeVoice","code":"{id}"},{"type":"text","text":", similar to OpenAPI specifications. With this form you can also extract parameter values from the URI that are prefixes or suffixes of a path component."}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/files\/{image}.jpg\") { request, context in","    let imageName = context.parameters.get(\"image\") else { throw HTTPError(.badRequest) }","    return getImage(image: imageName)","}"],"syntax":"swift"},{"inlineContent":[{"text":"In the example above we match all paths that are a file with a jpg extension inside the files folder and then call a function with that image name.","type":"text"}],"type":"paragraph"},{"text":"Query parameters","type":"heading","anchor":"Query-parameters","level":3},{"inlineContent":[{"text":"The ","type":"text"},{"type":"codeVoice","code":"Request"},{"text":" url query parameters are available via a number of methods from ","type":"text"},{"type":"codeVoice","code":"Request"},{"text":" member ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Request\/uri","type":"reference","isActive":true},{"text":". You can get the full query string using ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/query","type":"reference","isActive":true},{"text":". You can get the query string broken up into individual parameters and percent decoded using ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/queryParameters","type":"reference","isActive":true},{"text":".","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["router.get(\"\/user\") { request, context in","    \/\/ extract parameter from URL of form \/user?id={userId}","    let id = request.uri.queryParameters.get(\"id\", as: Int.self) else { throw HTTPError(.badRequest) }","    return getUser(id: id)","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"You can also use "},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/decodeQuery(as:context:)","isActive":true},{"type":"text","text":" to convert the query parameters into a Swift object. As with "},{"type":"codeVoice","code":"URI.queryParameters"},{"type":"text","text":" the values will be percent decoded."}],"type":"paragraph"},{"type":"codeListing","code":["struct Coordinate: Decodable {","    let x: Double","    let y: Double","}","router.get(\"tile\") { request, context in","    \/\/ create `Coordinate` from query parameters in URL of form \/tile?x={xCoordinate}&y={yCoordinate}","    let position = request.uri.decodeQuery(as: Coordinate.self, context: context)","    return tiles.get(at: position)","}"],"syntax":"swift"},{"text":"Groups","type":"heading","anchor":"Groups","level":3},{"inlineContent":[{"type":"text","text":"Routes can be grouped together in a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGroup"},{"type":"text","text":".  These allow for you to prefix a series of routes with the same path and more importantly apply middleware to only those routes. The example below is a group that includes five handlers all prefixed with the path “\/todos”."}],"type":"paragraph"},{"type":"codeListing","code":["let app = Application()","router.group(\"\/todos\")","    .put(use: createTodo)","    .get(use: listTodos)","    .get(\"{id}\", getTodo)","    .patch(\"{id}\", editTodo)","    .delete(\"{id}\", deleteTodo)"],"syntax":"swift"},{"text":"RequestContext transformation","type":"heading","anchor":"RequestContext-transformation","level":3},{"inlineContent":[{"type":"text","text":"The "},{"code":"RequestContext","type":"codeVoice"},{"type":"text","text":" can be transformed for the routes in a route group. The "},{"code":"RequestContext","type":"codeVoice"},{"type":"text","text":" you are converting to needs to conform to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext"},{"type":"text","text":". This requires a parent context ie the "},{"code":"RequestContext","type":"codeVoice"},{"type":"text","text":" you are converting from and a "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext\/init(context:)"},{"type":"text","text":" function to perform the conversion."}],"type":"paragraph"},{"type":"codeListing","code":["struct MyNewRequestContext: ChildRequestContext {","    typealias ParentContext = MyRequestContext","    init(context: ParentContext) throws {","        self.coreContext = context.coreContext","        ...","    }","}"],"syntax":"swift"},{"inlineContent":[{"text":"Once you have defined how to perform the transform from your original ","type":"text"},{"code":"RequestContext","type":"codeVoice"},{"text":" the conversion is added as follows","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["let app = Application(context: MyRequestContext.self)","router.group(\"\/todos\", context: MyNewRequestContext.self)","    .put(use: createTodo)","    .get(use: listTodos)"],"syntax":"swift"},{"text":"Route Collections","type":"heading","anchor":"Route-Collections","level":3},{"inlineContent":[{"type":"text","text":"A "},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouteCollection","isActive":true},{"type":"text","text":" is a collection of routes and middleware that can be added to a "},{"code":"Router","type":"codeVoice"},{"type":"text","text":" in one go. It has the same API as "},{"code":"RouterGroup","type":"codeVoice"},{"type":"text","text":", so can have groups internal to the collection to allow for Middleware to applied to only sub-sections of the "},{"code":"RouteCollection","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"codeListing","code":["struct UserController<Context: RequestContext> {","    var routes: RouteCollection<Context> {","        let routes = RouteCollection()","        routes.post(\"signup\", use: signUp)","        routes.group(\"login\")","            .add(middleware: BasicAuthenticationMiddleware())","            .post(use: login)","        return routes","    }","}"],"syntax":"swift"},{"inlineContent":[{"type":"text","text":"You add the route collection to your router using "},{"isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/addRoutes(_:atPath:)","type":"reference"},{"type":"text","text":"."}],"type":"paragraph"},{"type":"codeListing","code":["let router = Router()","router.add(\"users\", routes: UserController().routes)"],"syntax":"swift"},{"text":"Request Body","type":"heading","anchor":"Request-Body","level":3},{"inlineContent":[{"text":"By default the request body is an AsyncSequence of ByteBuffers. You can treat it as a series of buffers or collect it into one larger buffer.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["\/\/ process each buffer in the sequence separately","for try await buffer in request.body {","    process(buffer)","}"],"syntax":"swift"},{"type":"codeListing","code":["\/\/ collect all the buffers in the sequence into a single buffer","let buffer = try await request.body.collate(maxSize: maximumBufferSizeAllowed)"],"syntax":"swift"},{"inlineContent":[{"text":"Once you have read the sequence of buffers you cannot read it again. If you want to read the contents of a request body in middleware before it reaches the route handler, but still have it available for the route handler you can use ","type":"text"},{"code":"Request.collectBody(upTo:)","type":"codeVoice"},{"text":". After this point though the request body cannot be treated as a sequence of buffers as it has already been collapsed into a single buffer.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"Any errors you receive while iterating the request body should always be propagated further up the callstack. It is fine to catch the errors but you should rethrow them once you are done with them, so they can passed back to ","type":"text"},{"code":"Application","type":"codeVoice"},{"text":" to be dealt with according.","type":"text"}],"type":"paragraph"},{"text":"Writing the response body","type":"heading","anchor":"Writing-the-response-body","level":3},{"inlineContent":[{"type":"text","text":"The response body is returned back to the server as a closure that will write the body. The closure is provided with a writer type conforming to "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter"},{"type":"text","text":" and the closure uses this to write the buffers that make up the body. In most cases you don’t need to know this as "},{"type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBody"},{"type":"text","text":" has initializers that take a single "},{"type":"codeVoice","code":"ByteBuffer"},{"type":"text","text":", a sequence of "},{"type":"codeVoice","code":"ByteBuffers"},{"type":"text","text":" and an "},{"type":"codeVoice","code":"AsyncSequence"},{"type":"text","text":" of "},{"type":"codeVoice","code":"ByteBuffers"},{"type":"text","text":" which covers most of the kinds of responses."}],"type":"paragraph"},{"inlineContent":[{"text":"In the situation where you need something a little more flexible you can use the closure form. Below is a ","type":"text"},{"code":"ResponseBody","type":"codeVoice"},{"text":" that consists of 10 buffers of random data written with a one second pause between each buffer.","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["let responseBody = ResponseBody { writer in","    for _ in 0..<10 {","        try await Task.sleep(for: .seconds(1))","        let buffer = (0..<size).map { _ in UInt8.random(in: 0...255) }","        try await writer.write(buffer)","    }","    writer.finish(nil)","}"],"syntax":"swift"},{"inlineContent":[{"text":"Once you have finished writing your response body you need to tell the writer you have finished by calling ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter\/finish(_:)","type":"reference","isActive":true},{"text":". At this point you can write trailing headers by passing them to the ","type":"text"},{"code":"finish","type":"codeVoice"},{"text":" function. NB Trailing headers are only sent if your response body is chunked and does not include a content length header.","type":"text"}],"type":"paragraph"},{"text":"Editing response in handler","type":"heading","anchor":"Editing-response-in-handler","level":3},{"inlineContent":[{"text":"The standard way to provide a custom response from a route handler is to return a ","type":"text"},{"code":"Response","type":"codeVoice"},{"text":" from that handler. This method loses a lot of the automation of encoding responses, generating the correct status code etc.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"Instead you can return what is called a "},{"type":"codeVoice","code":"EditedResponse"},{"type":"text","text":". This includes a type that can generate a response on its own via the "},{"type":"codeVoice","code":"ResponseGenerator"},{"type":"text","text":" protocol and includes additional edits to the response."}],"type":"paragraph"},{"type":"codeListing","code":["router.post(\"test\") { request, _ -> EditedResponse in","    return .init(","        status: .accepted,","        headers: [.contentType: \"application\/json\"],","        response: #\"{\"test\": \"value\"}\"#","    )","}"],"syntax":"swift"}]}],"sections":[],"references":{"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/Request":{"kind":"symbol","type":"topic","title":"Request","abstract":[{"type":"text","text":"Holds all the values required to process a request"}],"url":"\/documentation\/hummingbirdcore\/request","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Request","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Request","navigatorTitle":[{"text":"Request","kind":"identifier"}]},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBodyWriter/finish(_:)":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter\/finish(_:)","url":"\/documentation\/hummingbirdcore\/responsebodywriter\/finish(_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"finish"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:9HTTPTypes10HTTPFieldsV","text":"HTTPFields"},{"kind":"text","text":"?) "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"role":"symbol","required":true,"title":"finish(_:)","type":"topic","abstract":[{"type":"text","text":"Finish writing body"}],"kind":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router":{"kind":"symbol","type":"topic","title":"Router","abstract":[{"text":"Create rules for routing requests and then create ","type":"text"},{"type":"codeVoice","code":"Responder"},{"text":" that will follow these rules.","type":"text"}],"url":"\/documentation\/hummingbird\/router","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Router"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router","navigatorTitle":[{"kind":"identifier","text":"Router"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ResponseEncodable":{"role":"symbol","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ResponseEncodable"}],"url":"\/documentation\/hummingbird\/responseencodable","abstract":[{"text":"Protocol for encodable object that can generate a response. The router will encode","type":"text"},{"text":" ","type":"text"},{"text":"the response using the encoder stored in ","type":"text"},{"code":"Application.encoder","type":"codeVoice"},{"text":".","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ResponseEncodable"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ResponseEncodable","title":"ResponseEncodable","type":"topic"},"logo.png":{"variants":[{"url":"\/images\/com.opticalaberration.hummingbird\/logo.png","traits":["1x","light"]}],"identifier":"logo.png","type":"image","alt":null},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/URI/query":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/query","type":"topic","url":"\/documentation\/hummingbirdcore\/uri\/query","abstract":[{"type":"text","text":"URL query"}],"role":"symbol","fragments":[{"kind":"keyword","text":"var"},{"kind":"text","text":" "},{"kind":"identifier","text":"query"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:SS","text":"String"},{"kind":"text","text":"?"}],"kind":"symbol","title":"query"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/Response":{"role":"symbol","kind":"symbol","navigatorTitle":[{"text":"Response","kind":"identifier"}],"url":"\/documentation\/hummingbirdcore\/response","abstract":[{"type":"text","text":"Holds all the required to generate a HTTP Response"}],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Response","kind":"identifier"}],"title":"Response","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Response","type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouterBuilderGuide":{"type":"topic","title":"Result Builder Router","url":"\/documentation\/hummingbird\/routerbuilderguide","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterBuilderGuide","kind":"article","images":[{"identifier":"logo.png","type":"icon"}],"role":"article","abstract":[{"text":"Building your router using a result builder.","type":"text"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Testing":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Testing","abstract":[{"text":"Using the HummingbirdTesting framework to test your application","type":"text"}],"role":"article","url":"\/documentation\/hummingbird\/testing","images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"Testing","kind":"article"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ResponseEncoding":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ResponseEncoding","abstract":[{"type":"text","text":"Writing Responses using JSON and other formats."}],"role":"article","url":"\/documentation\/hummingbird\/responseencoding","images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"Response Encoding","kind":"article"},"doc://com.opticalaberration.hummingbird/documentation/index":{"role":"collection","kind":"article","images":[{"identifier":"logo.png","type":"icon"}],"url":"\/documentation\/index","abstract":[{"text":"Documentation for Hummingbird the lightweight, flexible, modern server framework.","type":"text"}],"title":"Hummingbird Documentation","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/index","type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBodyWriter":{"kind":"symbol","type":"topic","title":"ResponseBodyWriter","abstract":[{"type":"text","text":"HTTP Response Body part writer"}],"url":"\/documentation\/hummingbirdcore\/responsebodywriter","role":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ResponseBodyWriter","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter","navigatorTitle":[{"text":"ResponseBodyWriter","kind":"identifier"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/MigratingToV2":{"type":"topic","title":"Migrating to Hummingbird v2","url":"\/documentation\/hummingbird\/migratingtov2","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MigratingToV2","kind":"article","images":[{"type":"icon","identifier":"logo.png"}],"role":"article","abstract":[{"type":"text","text":"Migration guide for converting Hummingbird v1 applications to Hummingbird v2"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/MiddlewareGuide":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MiddlewareGuide","abstract":[{"type":"text","text":"Processing requests and responses outside of request handlers."}],"role":"article","url":"\/documentation\/hummingbird\/middlewareguide","images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"Middleware","kind":"article"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/URI/queryParameters":{"kind":"symbol","abstract":[{"text":"URL query parameter map","type":"text"}],"role":"symbol","fragments":[{"text":"var","kind":"keyword"},{"text":" ","kind":"text"},{"text":"queryParameters","kind":"identifier"},{"text":": ","kind":"text"},{"text":"FlatDictionary","kind":"typeIdentifier","preciseIdentifier":"s:15HummingbirdCore14FlatDictionaryV"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:Ss","kind":"typeIdentifier","text":"Substring"},{"kind":"text","text":", "},{"preciseIdentifier":"s:Ss","kind":"typeIdentifier","text":"Substring"},{"kind":"text","text":">"}],"url":"\/documentation\/hummingbirdcore\/uri\/queryparameters","type":"topic","title":"queryParameters","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/queryParameters"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ServiceLifecycle":{"kind":"article","abstract":[{"type":"text","text":"Integration with Swift Service Lifecycle"}],"role":"article","url":"\/documentation\/hummingbird\/servicelifecycle","images":[{"identifier":"logo.png","type":"icon"}],"type":"topic","title":"Service Lifecycle","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServiceLifecycle"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RequestContexts":{"type":"topic","title":"Request Contexts","url":"\/documentation\/hummingbird\/requestcontexts","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestContexts","kind":"article","images":[{"type":"icon","identifier":"logo.png"}],"role":"article","abstract":[{"type":"text","text":"Controlling contextual data provided to middleware and route handlers"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ServerProtocol":{"role":"collectionGroup","kind":"article","images":[{"type":"icon","identifier":"logo.png"}],"url":"\/documentation\/hummingbird\/serverprotocol","abstract":[{"type":"text","text":"Support for TLS and HTTP2 upgrades"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServerProtocol","title":"Server protocol","type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RequestDecoding":{"type":"topic","title":"Request Decoding","url":"\/documentation\/hummingbird\/requestdecoding","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestDecoding","kind":"article","images":[{"type":"icon","identifier":"logo.png"}],"role":"article","abstract":[{"text":"Decoding of Requests with JSON content and other formats.","type":"text"}]},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBody":{"role":"symbol","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"ResponseBody"}],"url":"\/documentation\/hummingbirdcore\/responsebody","abstract":[{"type":"text","text":"Response body"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ResponseBody"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBody","title":"ResponseBody","type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ChildRequestContext":{"role":"symbol","kind":"symbol","navigatorTitle":[{"text":"ChildRequestContext","kind":"identifier"}],"url":"\/documentation\/hummingbird\/childrequestcontext","abstract":[{"text":"A RequestContext that can be initialized from another RequestContext.","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ChildRequestContext","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext","title":"ChildRequestContext","type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/HTTPError":{"abstract":[{"type":"text","text":"Default HTTP error. Provides an HTTP status and a message"}],"role":"symbol","navigatorTitle":[{"kind":"identifier","text":"HTTPError"}],"kind":"symbol","title":"HTTPError","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPError","type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"HTTPError"}],"url":"\/documentation\/hummingbird\/httperror"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/Request/uri":{"type":"topic","title":"uri","fragments":[{"kind":"keyword","text":"let"},{"kind":"text","text":" "},{"kind":"identifier","text":"uri"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:15HummingbirdCore3URIV","text":"URI"}],"url":"\/documentation\/hummingbirdcore\/request\/uri","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/Request\/uri","kind":"symbol","role":"symbol","abstract":[{"type":"text","text":"URI path"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouteCollection":{"kind":"symbol","type":"topic","title":"RouteCollection","abstract":[{"type":"text","text":"Collection of routes"}],"url":"\/documentation\/hummingbird\/routecollection","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"RouteCollection"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouteCollection","navigatorTitle":[{"kind":"identifier","text":"RouteCollection"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router/on(_:method:use:)":{"fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"on"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"RouterPath","preciseIdentifier":"s:11Hummingbird10RouterPathV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"method"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"HTTPRequest","preciseIdentifier":"s:9HTTPTypes11HTTPRequestV"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Method","preciseIdentifier":"s:9HTTPTypes11HTTPRequestV6MethodV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"use"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Request","preciseIdentifier":"s:15HummingbirdCore7RequestV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Context","preciseIdentifier":"s:11Hummingbird13RouterMethodsP7ContextQa"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"kind":"typeIdentifier","text":"ResponseGenerator","preciseIdentifier":"s:11Hummingbird17ResponseGeneratorP"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Self"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/on(_:method:use:)","role":"symbol","url":"\/documentation\/hummingbird\/router\/on(_:method:use:)","type":"topic","kind":"symbol","abstract":[{"text":"Add path for async closure","type":"text"}],"title":"on(_:method:use:)"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router/addRoutes(_:atPath:)":{"title":"addRoutes(_:atPath:)","role":"symbol","type":"topic","abstract":[{"type":"text","text":"Add route collection to router"}],"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"addRoutes","kind":"identifier"},{"text":"(","kind":"text"},{"preciseIdentifier":"s:11Hummingbird15RouteCollectionC","text":"RouteCollection","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"preciseIdentifier":"s:11Hummingbird13RouterMethodsP7ContextQa","text":"Context","kind":"typeIdentifier"},{"text":">, ","kind":"text"},{"text":"atPath","kind":"externalParam"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:11Hummingbird10RouterPathV","text":"RouterPath","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Self","kind":"typeIdentifier"}],"kind":"symbol","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/addRoutes(_:atPath:)","url":"\/documentation\/hummingbird\/router\/addroutes(_:atpath:)"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ErrorHandling":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ErrorHandling","abstract":[{"text":"How to build errors for the server to return.","type":"text"}],"role":"article","url":"\/documentation\/hummingbird\/errorhandling","images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"Error Handling","kind":"article"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ChildRequestContext/init(context:)":{"fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"context"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ParentContext","preciseIdentifier":"s:11Hummingbird19ChildRequestContextP06ParentD0Qa"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext\/init(context:)","required":true,"role":"symbol","url":"\/documentation\/hummingbird\/childrequestcontext\/init(context:)","type":"topic","kind":"symbol","abstract":[{"text":"Initialise RequestContext from source","type":"text"}],"title":"init(context:)"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouterGroup":{"abstract":[{"text":"Used to group together routes under a single path. Additional middleware can be added to the endpoint and each route can add a","type":"text"},{"text":" ","type":"text"},{"text":"suffix to the endpoint path","type":"text"}],"role":"symbol","navigatorTitle":[{"text":"RouterGroup","kind":"identifier"}],"kind":"symbol","title":"RouterGroup","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGroup","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RouterGroup","kind":"identifier"}],"url":"\/documentation\/hummingbird\/routergroup"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/URI/decodeQuery(as:context:)":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/URI\/decodeQuery(as:context:)","abstract":[{"type":"text","text":"Decode request query using "},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/URLEncodedFormDecoder","isActive":true},{"type":"text","text":"."}],"type":"topic","url":"\/documentation\/hummingbirdcore\/uri\/decodequery(as:context:)","role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"decodeQuery"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Type"},{"kind":"text","text":">("},{"kind":"externalParam","text":"as"},{"kind":"text","text":": "},{"preciseIdentifier":"s:15HummingbirdCore3URIV0A0E11decodeQuery2as7contextxxm_q_tKSeRzAD14RequestContextR_r0_lF4TypeL_xmfp","kind":"typeIdentifier","text":"Type"},{"kind":"text","text":".Type, "},{"kind":"externalParam","text":"context"},{"text":": ","kind":"text"},{"text":"some","kind":"keyword"},{"text":" ","kind":"text"},{"text":"RequestContext","kind":"typeIdentifier","preciseIdentifier":"s:11Hummingbird14RequestContextP"},{"text":") ","kind":"text"},{"text":"throws","kind":"keyword"},{"text":" -> ","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:15HummingbirdCore3URIV0A0E11decodeQuery2as7contextxxm_q_tKSeRzAD14RequestContextR_r0_lF4TypeL_xmfp","text":"Type"}],"title":"decodeQuery(as:context:)","kind":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/URLEncodedFormDecoder":{"kind":"symbol","type":"topic","title":"URLEncodedFormDecoder","abstract":[{"text":"The wrapper struct for decoding URL encoded form data to Codable classes","type":"text"}],"url":"\/documentation\/hummingbird\/urlencodedformdecoder","role":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"URLEncodedFormDecoder","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/URLEncodedFormDecoder","navigatorTitle":[{"text":"URLEncodedFormDecoder","kind":"identifier"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/LoggingMetricsAndTracing":{"type":"topic","title":"Logging, Metrics and Tracing","url":"\/documentation\/hummingbird\/loggingmetricsandtracing","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/LoggingMetricsAndTracing","kind":"article","images":[{"type":"icon","identifier":"logo.png"}],"role":"article","abstract":[{"text":"Considered the three pillars of observability, logging, metrics and tracing provide different ways of viewing how your application is working.","type":"text"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/PersistentData":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/PersistentData","abstract":[{"type":"text","text":"How to persist data between requests to your server."}],"role":"article","url":"\/documentation\/hummingbird\/persistentdata","images":[{"type":"icon","identifier":"logo.png"}],"type":"topic","title":"Persistent data","kind":"article"}}}