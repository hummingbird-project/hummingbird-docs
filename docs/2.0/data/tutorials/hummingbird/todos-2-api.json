{"kind":"project","metadata":{"category":"Todo backend","title":"Add your application API","categoryPathComponent":"Todos","role":"project"},"schemaVersion":{"major":0,"patch":0,"minor":3},"sections":[{"kind":"hero","image":"hummingbird.png","backgroundImage":"hummingbird.png","title":"Add your application API","content":[{"type":"paragraph","inlineContent":[{"text":"Add some functionality to your application.","type":"text"}]}],"chapter":"API Setup","estimatedTimeInMinutes":15},{"tasks":[{"contentSection":[{"mediaPosition":"trailing","media":"hummingbird.png","kind":"contentAndMedia","content":[{"inlineContent":[{"type":"text","text":"Create a controller type that will hold the Todos API"}],"type":"paragraph"}]}],"stepsSection":[{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add the new file "},{"code":"Sources\/App\/Controllers\/TodoController.swift","type":"codeVoice"},{"type":"text","text":"."}]}],"runtimePreview":null,"code":"todos-api-01.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"text":"Go back to ","type":"text"},{"type":"codeVoice","code":"buildRouter()"},{"text":" in App+build.swift. Routers ensure a Request is ","type":"text"},{"inlineContent":[{"text":"routed","type":"text"}],"type":"emphasis"},{"text":" to the correct handler function.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-template-06.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"And add the TodoController endpoints to your router. The Todos API has a URI prefix of “todos”."}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-02.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"text":"We are going to use the ","type":"text"},{"identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/","type":"reference","isActive":true},{"text":" to separate our storage concerns from our API. With this we should be able to create an API and test it without worrying about Database setup.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":null},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a product "},{"type":"codeVoice","code":"Todo"},{"type":"text","text":" that includes everything to define a todo."}]}],"runtimePreview":null,"code":"todos-api-03.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"We are going to use ","type":"text"},{"code":"Todo","type":"codeVoice"},{"text":" as the return value for some of our routes, so it needs to conform to ","type":"text"},{"code":"ResponseEncodable","type":"codeVoice"},{"text":". This allows us to return it from our routes and have it automatically encoded as JSON. Later we will also be using it in tests so lets add ","type":"text"},{"code":"Decodable","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"Equatable","type":"codeVoice"},{"text":" conformances, for reading JSON and comparing todos.","type":"text"}]}],"runtimePreview":null,"code":"todos-api-04.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a "},{"code":"TodoRepository","type":"codeVoice"},{"type":"text","text":" protocol that defines all the methods to manage todos: (get, list, create, update, delete and deleteAll). This allows us to use a different implementation of the repository for different storage methods."}]}],"runtimePreview":null,"code":"todos-api-05.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Create a concrete implementation of ","type":"text"},{"code":"TodoRepository","type":"codeVoice"},{"text":" protocol that saves everything to memory. We use an actor because multiple tasks could be accessing the repository at the same time, and actors are thread safe.","type":"text"}]}],"runtimePreview":null,"code":"todos-api-06.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Return to TodoController.swift","type":"text"}]}],"runtimePreview":null,"code":"todos-api-01.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"And add a generic repository member variable conforming to ","type":"text"},{"type":"codeVoice","code":"TodoRepository"},{"text":" to be used by the ","type":"text"},{"type":"codeVoice","code":"TodoController"},{"text":" routes. Generics allow us to use the same controller for different repository implementations.","type":"text"}]}],"runtimePreview":null,"code":"todos-api-07.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"Go to "},{"code":"buildRouter()","type":"codeVoice"},{"type":"text","text":" in App+build.swift"}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-02.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"And add the repository parameter to the TodoController initializer. We are using the memory implementation of the "},{"type":"codeVoice","code":"TodoRepository"},{"type":"text","text":" we have already implemented previously."}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-08.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Return to TodoController.swift. We can now start adding our endpoints. An endpoint (or Route) is a function that replies to a request if the path and method match."}]}],"runtimePreview":null,"code":"todos-api-07.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"text":"Our first endpoint is to return a Todo given an id in the URI. We extract the id from the URI, attempt to convert it to a UUID and then call the repository method ","type":"text"},{"code":"get","type":"codeVoice"},{"text":" and return the result. The result is then converted to a response using the response encoder (JSONEncoder by default) attached to the context.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-09.swift"},{"type":"step","caption":[{"type":"paragraph","inlineContent":[{"text":"If the endpoint returns nil because it could not find a todo this will automatically return a 204 (No Content) HTTP response to the client.","type":"text"}]}],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This endpoint has a few other features. If it fails to convert the id to a UUID then it throws an "},{"type":"codeVoice","code":"HTTPError"},{"type":"text","text":". This is an error that can be converted by the server to a valid HTTP response. If the server receives an error it cannot convert to an HTTP response it will return a 500 (Internal Server Error) HTTP error to the client."}]}],"runtimePreview":null,"code":"todos-api-09.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Our second endpoint is to create a Todo. We have added a struct to decode from the request. In a similar way the get endpoint response uses JSONEncoder to generate its response, this uses the JSONDecoder attached to the context to read JSON from the request. We then call the repository "},{"type":"codeVoice","code":"create"},{"type":"text","text":" method and return the result."}]}],"runtimePreview":null,"code":"todos-api-10.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"Returning an object and not a raw Response, in general sets the response status to 200 (OK). In this situation we want to return a 201 (Created) status. We can do this by returning an "},{"type":"codeVoice","code":"EditedResponse"},{"type":"text","text":" which can be used to edit the status code and headers of a generated response."}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-11.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"We now have an API we can test. Lets use curl to create a Todo. If we include the command line parameter ","type":"text"},{"type":"codeVoice","code":"-i"},{"text":" we get the full HTTP response and can see that the status code is 201 (Created).","type":"text"}]}],"runtimePreview":null,"code":"todos-api-12.sh"},{"type":"step","caption":[{"inlineContent":[{"type":"text","text":"Cool it works!"}],"type":"paragraph"}],"media":null,"content":[{"inlineContent":[{"text":"Then use curl to access the URL that was in the returned json from the previous curl call.","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-13.sh"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"text":"Continuing with adding our API endpoints","type":"text"}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-11.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"This is the endpoint that lists all of the todos that have been created. Because "},{"code":"Todo","type":"codeVoice"},{"type":"text","text":" conforms to "},{"code":"ResponseEncodable","type":"codeVoice"},{"type":"text","text":", "},{"code":"Array<Todo>","type":"codeVoice"},{"type":"text","text":" automatically conforms to "},{"code":"ResponseEncodable","type":"codeVoice"},{"type":"text","text":" as well."}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-14.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the endpoint that updates a todo. It extracts the todo id from the URI, decodes the UpdateRequest from the request and then calls the repository "},{"code":"update","type":"codeVoice"},{"type":"text","text":" function."}]}],"runtimePreview":null,"code":"todos-api-15.swift"},{"type":"step","caption":[],"media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the endpoint that deletes a todo. It extracts the todo id from the URI and calls the repository "},{"type":"codeVoice","code":"delete"},{"type":"text","text":" function."}]}],"runtimePreview":null,"code":"todos-api-16.swift"},{"type":"step","caption":[],"media":null,"content":[{"inlineContent":[{"type":"text","text":"The final endpoint is the one that deletes all todos. It simply calls the repository "},{"type":"codeVoice","code":"deleteAll"},{"type":"text","text":" function, as it doesn’t need to extract any information from the request."}],"type":"paragraph"}],"runtimePreview":null,"code":"todos-api-17.swift"}],"anchor":"Todo-Controller-and-Repository","title":"Todo Controller and Repository"},{"contentSection":[{"media":"hummingbird.png","mediaPosition":"trailing","content":[{"type":"paragraph","inlineContent":[{"text":"Use curl to ensure your API is working as expected.","type":"text"}]}],"kind":"contentAndMedia"}],"stepsSection":[{"code":"todos-api-18.sh","media":null,"content":[{"inlineContent":[{"type":"text","text":"Lets test the full API. First we are going to create two todos"}],"type":"paragraph"}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-19.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"When we query the URL returned by the first curl request we should get the first Todo added."}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-20.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If we update the second Todo and set it to completed …"}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-21.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"when we list all the tests you will see it is now flagged as completed"}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-22.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If we delete a Todo …"}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-23.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"when we try to get it again a 204 (No Content) response is returned, as it no longer exists.","type":"text"}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-24.sh","media":null,"content":[{"type":"paragraph","inlineContent":[{"text":"If we delete all of the Todos …","type":"text"}]}],"type":"step","runtimePreview":null,"caption":[]},{"code":"todos-api-25.sh","media":null,"content":[{"inlineContent":[{"type":"text","text":"when we list the Todos, the list is empty."}],"type":"paragraph"}],"type":"step","runtimePreview":null,"caption":[{"inlineContent":[{"type":"text","text":"This is not exactly a thorough way to test your application. It is error prone and cumbersome. Move onto the next chapter to discover how you can make this process more streamlined."}],"type":"paragraph"}]}],"anchor":"Testing-your-application-with-curl","title":"Testing your application with curl"}],"kind":"tasks"},{"action":{"overridingTitleInlineContent":[{"type":"text","text":"Get started"}],"isActive":true,"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","overridingTitle":"Get started"},"kind":"callToAction","title":"Testing your application","featuredEyebrow":"Tutorial","abstract":[{"text":"Test your application using the HummingbirdTesting framework","type":"text"}]}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API"},"variants":[{"paths":["\/tutorials\/hummingbird\/todos-2-api"],"traits":[{"interfaceLanguage":"swift"}]}],"hierarchy":{"paths":[["doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/$volume","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup"]],"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","modules":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-Setup","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template#Create-your-project","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Project-testing-setup","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-your-application","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres","sections":[{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database"},{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository"}]}]}]},"references":{"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing":{"type":"topic","abstract":[{"text":"Test your application using the HummingbirdTesting framework","type":"text"}],"role":"project","kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","url":"\/tutorials\/hummingbird\/todos-3-testing","estimatedTime":"10min","title":"Testing your application"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Project-testing-setup":{"kind":"section","type":"section","abstract":[{"type":"text","text":"Test your application using the HummingbirdTesting framework"}],"url":"\/tutorials\/hummingbird\/todos-3-testing#Project-testing-setup","title":"Project testing setup","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Project-testing-setup","role":"pseudoSymbol"},"todos-api-05.swift":{"type":"file","content":["import Foundation","","\/\/\/ Interface for storing and editing todos","protocol TodoRepository: Sendable {","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo?","    \/\/\/ List all todos","    func list() async throws -> [Todo]","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo?","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool","    \/\/\/ Delete all todos","    func deleteAll() async throws","}"],"fileName":"Sources\/App\/Repositories\/TodoRepository.swift","syntax":"swift","fileType":"swift","highlights":[],"identifier":"todos-api-05.swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-your-Postgres-database":{"kind":"section","type":"section","abstract":[{"type":"text","text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO."}],"url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-your-Postgres-database","title":"Setup your Postgres database","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database","role":"pseudoSymbol"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Template":{"type":"topic","abstract":[{"type":"text","text":"Create a simple web application using the Hummingbird template."}],"role":"project","kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template","url":"\/tutorials\/hummingbird\/todos-1-template","estimatedTime":"5min","title":"Create a Hummingbird application."},"todos-api-03.swift":{"highlights":[],"syntax":"swift","type":"file","content":["import Foundation","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}"],"fileName":"Sources\/App\/Repositories\/Todo.swift","identifier":"todos-api-03.swift","fileType":"swift"},"todos-template-06.swift":{"type":"file","content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    return router","}"],"fileName":"Sources\/App\/App+build.swift","syntax":"swift","fileType":"swift","highlights":[],"identifier":"todos-template-06.swift"},"todos-api-16.swift":{"highlights":[{"line":15},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27}],"syntax":"swift","type":"file","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","    }","","    \/\/\/ Delete todo endpoint","    func delete(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        if try await self.repository.delete(id: id) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id,","            title: request.title,","            order: request.order,","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-16.swift","fileType":"swift"},"todos-api-20.sh":{"type":"file","content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Mon, 9 Sep 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"],"fileName":"Test update","syntax":"","fileType":"","highlights":[],"identifier":"todos-api-20.sh"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Application-Setup":{"kind":"article","type":"topic","abstract":[],"url":"\/tutorials\/todos\/application-setup","title":"Application Setup","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-Setup","role":"article"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API":{"type":"topic","abstract":[{"type":"text","text":"Add some functionality to your application."}],"role":"project","kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API","url":"\/tutorials\/hummingbird\/todos-2-api","estimatedTime":"15min","title":"Add your application API"},"todos-api-18.sh":{"highlights":[],"syntax":"","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Mon, 9 Sep 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"],"type":"file","fileName":"Test create and get","identifier":"todos-api-18.sh","fileType":""},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Todo-Controller-and-Repository":{"type":"section","abstract":[{"type":"text","text":"Add some functionality to your application."}],"role":"pseudoSymbol","kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository","url":"\/tutorials\/hummingbird\/todos-2-api#Todo-Controller-and-Repository","title":"Todo Controller and Repository"},"todos-api-09.swift":{"highlights":[],"syntax":"swift","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","}"],"type":"file","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-09.swift","fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Testing-your-application-with-curl":{"type":"section","abstract":[{"type":"text","text":"Add some functionality to your application."}],"role":"pseudoSymbol","kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl","url":"\/tutorials\/hummingbird\/todos-2-api#Testing-your-application-with-curl","title":"Testing your application with curl"},"todos-api-04.swift":{"highlights":[{"line":2},{"line":16},{"line":17}],"content":["import Foundation","import Hummingbird","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}","","extension Todo: ResponseEncodable, Decodable, Equatable {}"],"type":"file","syntax":"swift","fileName":"Sources\/App\/Repositories\/Todo.swift","identifier":"todos-api-04.swift","fileType":"swift"},"todos-api-22.sh":{"type":"file","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT"],"fileName":"Test delete","syntax":"","fileType":"","highlights":[],"identifier":"todos-api-22.sh"},"todos-api-19.sh":{"highlights":[{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23}],"syntax":"","type":"file","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Mon, 9 Sep 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:43 GMT","","{\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"completed\":false}"],"fileName":"Test create and get","identifier":"todos-api-19.sh","fileType":""},"todos-api-25.sh":{"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:52:19 GMT","","> curl -i http:\/\/localhost:8080\/todos\/                                              ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 2","Date: Mon, 9 Sep 2024 11:52:24 GMT","","[]"],"type":"file","fileName":"Test delete","syntax":"","fileType":"","highlights":[{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21}],"identifier":"todos-api-25.sh"},"todos-api-01.swift":{"highlights":[],"syntax":"swift","type":"file","content":["import Hummingbird","","struct TodoController {","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","    }","}"],"fileName":"Sources\/App\/Controllers\/TodoController.swift","fileType":"swift","identifier":"todos-api-01.swift"},"https://www.geeksforgeeks.org/repository-design-pattern/":{"titleInlineContent":[{"type":"text","text":"repository design pattern"}],"type":"link","identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/","title":"repository design pattern","url":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres":{"type":"topic","abstract":[{"text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO.","type":"text"}],"role":"project","kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres","url":"\/tutorials\/hummingbird\/todos-4-postgres","estimatedTime":"15min","title":"Use PostgresNIO to store your Todos in a Postgres database"},"todos-api-15.swift":{"highlights":[{"line":14},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36}],"syntax":"swift","type":"file","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id,","            title: request.title,","            order: request.order,","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"fileName":"Sources\/App\/Controllers\/TodoController.swift","fileType":"swift","identifier":"todos-api-15.swift"},"todos-api-14.swift":{"type":"file","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"fileName":"Sources\/App\/Controllers\/TodoController.swift","syntax":"swift","fileType":"swift","highlights":[{"line":12},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26}],"identifier":"todos-api-14.swift"},"todos-api-12.sh":{"highlights":[],"syntax":"","type":"file","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Read chapter on testing applications\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 187","Date: Mon, 9 Sep 2024 10:02:08 GMT","","{\"completed\":false,\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"title\":\"Read chapter on testing applications\"}"],"fileName":"Test create","identifier":"todos-api-12.sh","fileType":""},"todos-api-11.swift":{"type":"file","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"fileName":"Sources\/App\/Controllers\/TodoController.swift","syntax":"swift","fileType":"swift","highlights":[],"identifier":"todos-api-11.swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Template#Create-your-project":{"kind":"section","type":"section","abstract":[{"text":"Create a simple web application using the Hummingbird template.","type":"text"}],"title":"Create your project","url":"\/tutorials\/hummingbird\/todos-1-template#Create-your-project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template#Create-your-project","role":"pseudoSymbol"},"todos-api-08.swift":{"type":"file","content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    router.addRoutes(TodoController(repository: TodoMemoryRepository()).endpoints, atPath: \"\/todos\")","    return router","}"],"fileName":"Sources\/App\/App+build.swift","syntax":"swift","fileType":"swift","highlights":[{"line":13}],"identifier":"todos-api-08.swift"},"todos-api-23.sh":{"highlights":[{"line":5},{"line":6},{"line":7},{"line":8}],"syntax":"","type":"file","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT"],"fileName":"Test delete","fileType":"","identifier":"todos-api-23.sh"},"todos-api-06.swift":{"content":["import Foundation","","\/\/\/ Concrete implementation of `TodoRepository` that stores everything in memory","actor TodoMemoryRepository: TodoRepository {","    var todos: [UUID: Todo]","","    init() {","        self.todos = [:]","    }","","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo {","        let id = UUID()","        let url = urlPrefix + id.uuidString","        let todo = Todo(id: id, title: title, order: order, url: url, completed: false)","        self.todos[id] = todo","        return todo","    }","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo? {","        return self.todos[id]","    }","    \/\/\/ List all todos","    func list() async throws -> [Todo] {","        return self.todos.values.map { $0 }","    }","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo? {","        if var todo = self.todos[id] {","            if let title {","                todo.title = title","            }","            if let order {","                todo.order = order","            }","            if let completed {","                todo.completed = completed","            }","            self.todos[id] = todo","            return todo","        }","        return nil","    }","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool {","        if self.todos[id] != nil {","            self.todos[id] = nil","            return true","        }","        return false","    }","    \/\/\/ Delete all todos","    func deleteAll() async throws {","        self.todos = [:]","    }","","}"],"type":"file","fileName":"Sources\/App\/Repositories\/TodoMemoryRepository.swift","syntax":"swift","fileType":"swift","highlights":[],"identifier":"todos-api-06.swift"},"todos-api-07.swift":{"highlights":[],"content":["import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","    }","}"],"syntax":"swift","type":"file","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-07.swift","fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos":{"type":"topic","abstract":[{"text":"A tutorial showing you how to build a simple Todos application that allows you to store, access, edit and delete Todos in a database, using Hummingbird and PostgresNIO.","type":"text"}],"role":"overview","kind":"overview","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","url":"\/tutorials\/todos","title":"Build a Todos application."},"todos-api-10.swift":{"highlights":[{"line":12},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29}],"syntax":"swift","content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> Todo {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        return try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","    }","}"],"type":"file","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-10.swift","fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Store-Todos-in-a-database":{"type":"topic","abstract":[],"role":"article","kind":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database","url":"\/tutorials\/todos\/store-todos-in-a-database","title":"Store Todos in a database"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-a-Postgres-repository":{"kind":"section","type":"section","abstract":[{"type":"text","text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO."}],"url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-a-Postgres-repository","title":"Setup a Postgres repository","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository","role":"pseudoSymbol"},"todos-api-13.sh":{"type":"file","content":["> curl http:\/\/localhost:8080\/todos\/284DC153-4FE9-458D-8A93-6CB60990B2F3","{\"completed\":false,\"title\":\"Read chapter on testing applications\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\"}"],"fileName":"Test get","syntax":"","fileType":"","highlights":[],"identifier":"todos-api-13.sh"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Test-your-application":{"kind":"section","type":"section","abstract":[{"text":"Test your application using the HummingbirdTesting framework","type":"text"}],"title":"Test your application","url":"\/tutorials\/hummingbird\/todos-3-testing#Test-your-application","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-your-application","role":"pseudoSymbol"},"todos-api-02.swift":{"type":"file","content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    router.addRoutes(TodoController().endpoints, atPath: \"\/todos\")","    return router","}"],"fileName":"Sources\/App\/App+build.swift","syntax":"swift","fileType":"swift","highlights":[],"identifier":"todos-api-02.swift"},"hummingbird.png":{"type":"image","alt":"Hummingbird logo","identifier":"hummingbird.png","variants":[{"url":"\/images\/com.opticalaberration.hummingbird\/hummingbird.png","traits":["1x","light"]}]},"todos-api-17.swift":{"highlights":[{"line":16},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","            .delete(use: deleteAll)","    }","","    \/\/\/ Delete all todos endpoint","    func deleteAll(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        try await self.repository.deleteAll()","        return .ok","    }","","    \/\/\/ Delete todo endpoint","    func delete(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        if try await self.repository.delete(id: id) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id,","            title: request.title,","            order: request.order,","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"type":"file","syntax":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-17.swift","fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Testing-your-application":{"type":"topic","abstract":[],"role":"article","kind":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","url":"\/tutorials\/todos\/testing-your-application","title":"Testing your application"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/API-Setup":{"kind":"article","type":"topic","abstract":[],"url":"\/tutorials\/todos\/api-setup","title":"API Setup","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","role":"article"},"todos-api-24.sh":{"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:52:19 GMT"],"type":"file","fileName":"Test delete","syntax":"","fileType":"","highlights":[{"line":9},{"line":10},{"line":11},{"line":12},{"line":13}],"identifier":"todos-api-24.sh"},"todos-api-21.sh":{"highlights":[{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16}],"syntax":"","type":"file","content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Mon, 9 Sep 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 330","Date: Mon, 9 Sep 2024 11:50:26 GMT","","[{\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\"},{\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}]",""],"fileName":"Test update","identifier":"todos-api-21.sh","fileType":""}}}