{"metadata":{"role":"project","category":"Todo backend","title":"Add your application API","categoryPathComponent":"Todos"},"sections":[{"image":"hummingbird.png","title":"Add your application API","kind":"hero","estimatedTimeInMinutes":20,"chapter":"API Setup","backgroundImage":"hummingbird.png","content":[{"inlineContent":[{"type":"text","text":"Add some functionality to your application."}],"type":"paragraph"}]},{"tasks":[{"stepsSection":[{"code":"todos-api-01.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"Add the new file ","type":"text"},{"type":"codeVoice","code":"Sources\/App\/Controllers\/TodoController.swift"},{"text":".","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-template-06.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Go back to ","type":"text"},{"code":"buildRouter()","type":"codeVoice"},{"text":" in Application+build.swift. Routers ensure a Request is ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"routed"}]},{"text":" to the correct handler function.","type":"text"}]}],"caption":[]},{"code":"todos-api-02.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"And add the TodoController endpoints to your router. The Todos API has a URI prefix of “todos”.","type":"text"}]}],"caption":[]},{"code":null,"media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"We are going to use the ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/"},{"text":" to separate our storage concerns from our API. With this we should be able to create an API and test it without worrying about Database setup.","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-03.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"Create a product ","type":"text"},{"type":"codeVoice","code":"Todo"},{"text":" that includes everything to define a todo.","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-04.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"We are going to use ","type":"text"},{"code":"Todo","type":"codeVoice"},{"text":" as the return value for some of our routes, so it needs to conform to ","type":"text"},{"code":"ResponseEncodable","type":"codeVoice"},{"text":". This allows us to return it from our routes and have it automatically encoded as JSON. Later we will also be using it in tests so lets add ","type":"text"},{"code":"Decodable","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"Equatable","type":"codeVoice"},{"text":" conformances, for reading JSON and comparing todos.","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-05.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a "},{"type":"codeVoice","code":"TodoRepository"},{"type":"text","text":" protocol that defines all the methods to manage todos: (get, list, create, update, delete and deleteAll). This allows us to use a different implementation of the repository for different storage methods."}]}],"caption":[]},{"code":"todos-api-06.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Create a concrete implementation of "},{"type":"codeVoice","code":"TodoRepository"},{"type":"text","text":" protocol that saves everything to memory. We use an actor because multiple tasks could be accessing the repository at the same time, and actors are thread safe."}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-01.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Return to TodoController.swift"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-07.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"And add a generic repository member variable conforming to ","type":"text"},{"code":"TodoRepository","type":"codeVoice"},{"text":" to be used by the ","type":"text"},{"code":"TodoController","type":"codeVoice"},{"text":" routes. Generics allow us to use the same controller for different repository implementations.","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-02.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Go to "},{"code":"buildRouter()","type":"codeVoice"},{"type":"text","text":" in Application+build.swift"}]}],"caption":[]},{"code":"todos-api-08.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"And add the repository parameter to the TodoController initializer. We are using the memory implementation of the "},{"code":"TodoRepository","type":"codeVoice"},{"type":"text","text":" we have already implemented previously."}]}],"caption":[]},{"code":"todos-api-07.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Return to TodoController.swift. We can now start adding our endpoints. An endpoint (or Route) is a function that replies to a request if the path and method match.","type":"text"}]}],"caption":[]},{"code":"todos-api-09.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Our first endpoint is to return a Todo given an id in the URI. We extract the id from the URI, attempt to convert it to a UUID and then call the repository method "},{"code":"get","type":"codeVoice"},{"type":"text","text":" and return the result. The result is then converted to a response using the response encoder (JSONEncoder by default) attached to the context."}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-09.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"This endpoint has a few other features. If it fails to convert the id to a UUID then it throws an ","type":"text"},{"code":"HTTPError","type":"codeVoice"},{"text":". This is an error that can be converted by the server to a valid HTTP response. If the server receives an error it cannot convert to an HTTP response it will return a 500 (Internal Server Error) HTTP error to the client.","type":"text"}],"type":"paragraph"}],"caption":[{"inlineContent":[{"text":"If the endpoint returns nil because it could not find a todo this will automatically return a 204 (No Content) HTTP response to the client.","type":"text"}],"type":"paragraph"}]},{"code":"todos-api-10.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Our second endpoint is to create a Todo. We have added a struct to decode from the request. In a similar way the get endpoint response uses JSONEncoder to generate its response, this uses the JSONDecoder attached to the context to read JSON from the request. We then call the repository "},{"code":"create","type":"codeVoice"},{"type":"text","text":" method and return the result."}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-11.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Returning an object and not a raw Response, in general sets the response status to 200 (OK). In this situation we want to return a 201 (Created) status. We can do this by returning an "},{"type":"codeVoice","code":"EditedResponse"},{"type":"text","text":" which can be used to edit the status code and headers of a generated response."}]}],"caption":[]},{"code":"todos-api-12.sh","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"We now have an API we can test. Lets use curl to create a Todo. If we include the command line parameter ","type":"text"},{"type":"codeVoice","code":"-i"},{"text":" we get the full HTTP response and can see that the status code is 201 (Created).","type":"text"}]}],"caption":[]},{"code":"todos-api-13.sh","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Then use curl to access the URL that was in the returned json from the previous curl call.","type":"text"}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Cool it works!"}]}]},{"code":"todos-api-11.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"Continuing with adding our API endpoints","type":"text"}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-14.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"This is the endpoint that lists all of the todos that have been created. Because "},{"type":"codeVoice","code":"Todo"},{"type":"text","text":" conforms to "},{"type":"codeVoice","code":"ResponseEncodable"},{"type":"text","text":", "},{"type":"codeVoice","code":"Array<Todo>"},{"type":"text","text":" automatically conforms to "},{"type":"codeVoice","code":"ResponseEncodable"},{"type":"text","text":" as well."}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-15.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"This is the endpoint that updates a todo. It extracts the todo id from the URI, decodes the UpdateRequest from the request and then calls the repository "},{"type":"codeVoice","code":"update"},{"type":"text","text":" function."}],"type":"paragraph"}],"caption":[]},{"code":"todos-api-16.swift","media":null,"type":"step","runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the endpoint that deletes a todo. It extracts the todo id from the URI and calls the repository "},{"type":"codeVoice","code":"delete"},{"type":"text","text":" function."}]}],"caption":[]},{"code":"todos-api-17.swift","media":null,"type":"step","runtimePreview":null,"content":[{"inlineContent":[{"text":"The final endpoint is the one that deletes all todos. It simply calls the repository ","type":"text"},{"type":"codeVoice","code":"deleteAll"},{"text":" function, as it doesn’t need to extract any information from the request.","type":"text"}],"type":"paragraph"}],"caption":[]}],"title":"Todo Controller and Repository","contentSection":[{"mediaPosition":"trailing","media":"hummingbird.png","kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Create a controller type that will hold the Todos API"}]}]}],"anchor":"Todo-Controller-and-Repository"},{"stepsSection":[{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"Lets test the full API. First we are going to create two todos","type":"text"}]}],"media":null,"caption":[],"code":"todos-api-18.sh"},{"runtimePreview":null,"type":"step","content":[{"inlineContent":[{"text":"When we query the URL returned by the first curl request we should get the first Todo added.","type":"text"}],"type":"paragraph"}],"media":null,"caption":[],"code":"todos-api-19.sh"},{"runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"If we update the second Todo and set it to completed …"}],"type":"paragraph"}],"media":null,"caption":[],"code":"todos-api-20.sh"},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"when we list all the tests you will see it is now flagged as completed"}]}],"media":null,"caption":[],"code":"todos-api-21.sh"},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If we delete a Todo …"}]}],"media":null,"caption":[],"code":"todos-api-22.sh"},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"when we try to get it again a 204 (No Content) response is returned, as it no longer exists.","type":"text"}]}],"media":null,"caption":[],"code":"todos-api-23.sh"},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If we delete all of the Todos …"}]}],"media":null,"caption":[],"code":"todos-api-24.sh"},{"runtimePreview":null,"type":"step","content":[{"inlineContent":[{"type":"text","text":"when we list the Todos, the list is empty."}],"type":"paragraph"}],"media":null,"caption":[{"inlineContent":[{"type":"text","text":"This is not exactly a thorough way to test your application. It is error prone and cumbersome. Move onto the next chapter to discover how you can make this process more streamlined."}],"type":"paragraph"}],"code":"todos-api-25.sh"}],"title":"Testing your application with curl","contentSection":[{"content":[{"inlineContent":[{"text":"Use curl to ensure your API is working as expected.","type":"text"}],"type":"paragraph"}],"media":"hummingbird.png","kind":"contentAndMedia","mediaPosition":"trailing"}],"anchor":"Testing-your-application-with-curl"}],"kind":"tasks"},{"action":{"overridingTitle":"Get started","type":"reference","isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","overridingTitleInlineContent":[{"text":"Get started","type":"text"}]},"abstract":[{"type":"text","text":"Test your application using the HummingbirdTesting framework"}],"kind":"callToAction","title":"Testing your application","featuredEyebrow":"Tutorial"}],"kind":"project","schemaVersion":{"major":0,"minor":3,"patch":0},"hierarchy":{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","modules":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-Setup","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template#Create-your-project","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API","sections":[{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository"},{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Project-testing-setup","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-your-application","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database","projects":[{"sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository","kind":"task"}],"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres"}]}],"paths":[["doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/$volume","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API"},"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/tutorials\/hummingbird\/todos-2-api"]}],"references":{"hummingbird.png":{"type":"image","alt":"Hummingbird logo","identifier":"hummingbird.png","variants":[{"traits":["1x","light"],"url":"\/images\/com.opticalaberration.hummingbird\/hummingbird.png"}]},"todos-api-03.swift":{"fileType":"swift","fileName":"Sources\/App\/Repositories\/Todo.swift","identifier":"todos-api-03.swift","type":"file","syntax":"swift","highlights":[],"content":["import Foundation","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}"]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Template":{"estimatedTime":"5min","title":"Create a Hummingbird application.","abstract":[{"type":"text","text":"Create a simple web application using the Hummingbird template."}],"kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template","role":"project","type":"topic","url":"\/tutorials\/hummingbird\/todos-1-template"},"todos-api-08.swift":{"highlights":[{"line":13}],"content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    router.addRoutes(TodoController(repository: TodoMemoryRepository()).endpoints, atPath: \"\/todos\")","    return router","}"],"identifier":"todos-api-08.swift","fileType":"swift","fileName":"Sources\/App\/Application+build.swift","type":"file","syntax":"swift"},"todos-api-15.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-15.swift","type":"file","syntax":"swift","highlights":[{"line":14},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    @Sendable func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    @Sendable func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"]},"todos-api-17.swift":{"highlights":[{"line":16},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","            .delete(use: deleteAll)","    }","","    \/\/\/ Delete all todos endpoint","    @Sendable func deleteAll(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        try await self.repository.deleteAll()","        return .ok","    }","","    \/\/\/ Delete todo endpoint","    @Sendable func delete(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        if try await self.repository.delete(id: id) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    @Sendable func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    @Sendable func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"],"identifier":"todos-api-17.swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","type":"file","fileType":"swift","syntax":"swift"},"todos-api-16.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-16.swift","type":"file","syntax":"swift","highlights":[{"line":15},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","    }","","    \/\/\/ Delete todo endpoint","    @Sendable func delete(request: Request, context: some RequestContext) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        if try await self.repository.delete(id: id) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo endpoint","    @Sendable func update(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        let request = try await request.decode(as: UpdateRequest.self, context: context)","        guard let todo = try await self.repository.update(","            id: id, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    @Sendable func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"]},"todos-api-07.swift":{"highlights":[],"content":["import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","    }","}"],"identifier":"todos-api-07.swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","type":"file","fileType":"swift","syntax":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos":{"title":"Build a Todos application.","abstract":[{"type":"text","text":"A tutorial showing you how to build a simple Todos application that allows you to store, access, edit and delete Todos in a database, using Hummingbird and PostgresNIO."}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","kind":"overview","role":"overview","type":"topic","url":"\/tutorials\/todos"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Project-testing-setup":{"title":"Project testing setup","abstract":[{"type":"text","text":"Test your application using the HummingbirdTesting framework"}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Project-testing-setup","role":"pseudoSymbol","type":"section","url":"\/tutorials\/hummingbird\/todos-3-testing#Project-testing-setup"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Template#Create-your-project":{"title":"Create your project","abstract":[{"type":"text","text":"Create a simple web application using the Hummingbird template."}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Template#Create-your-project","role":"pseudoSymbol","type":"section","url":"\/tutorials\/hummingbird\/todos-1-template#Create-your-project"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Application-Setup":{"role":"article","type":"topic","title":"Application Setup","url":"\/tutorials\/todos\/application-setup","abstract":[],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-Setup","kind":"article"},"todos-api-09.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-09.swift","type":"file","syntax":"swift","highlights":[],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","}"]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API":{"estimatedTime":"20min","title":"Add your application API","abstract":[{"type":"text","text":"Add some functionality to your application."}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API","kind":"project","role":"project","type":"topic","url":"\/tutorials\/hummingbird\/todos-2-api"},"todos-api-02.swift":{"highlights":[],"content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    router.addRoutes(TodoController().endpoints, atPath: \"\/todos\")","    return router","}"],"identifier":"todos-api-02.swift","fileName":"Sources\/App\/Application+build.swift","type":"file","fileType":"swift","syntax":"swift"},"todos-api-25.sh":{"fileType":"","fileName":"Test delete","identifier":"todos-api-25.sh","type":"file","syntax":"","highlights":[{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21}],"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:52:19 GMT","","> curl -i http:\/\/localhost:8080\/todos\/                                              ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 2","Date: Mon, 9 Sep 2024 11:52:24 GMT","","[]"]},"todos-api-01.swift":{"highlights":[],"content":["import Hummingbird","","struct TodoController {","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","    }","}"],"identifier":"todos-api-01.swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","type":"file","fileType":"swift","syntax":"swift"},"todos-api-04.swift":{"fileType":"swift","fileName":"Sources\/App\/Repositories\/Todo.swift","identifier":"todos-api-04.swift","type":"file","syntax":"swift","highlights":[{"line":2},{"line":16},{"line":17}],"content":["import Foundation","import Hummingbird","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}","","extension Todo: ResponseEncodable, Decodable, Equatable {}"]},"todos-api-12.sh":{"highlights":[],"content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Read chapter on testing applications\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 187","Date: Mon, 9 Sep 2024 10:02:08 GMT","","{\"completed\":false,\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"title\":\"Read chapter on testing applications\"}"],"identifier":"todos-api-12.sh","fileName":"Test create","type":"file","fileType":"","syntax":""},"todos-api-19.sh":{"fileType":"","fileName":"Test create and get","identifier":"todos-api-19.sh","type":"file","syntax":"","highlights":[{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23}],"content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Mon, 9 Sep 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:43 GMT","","{\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"completed\":false}"]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Todo-Controller-and-Repository":{"title":"Todo Controller and Repository","abstract":[{"type":"text","text":"Add some functionality to your application."}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository","role":"pseudoSymbol","type":"section","url":"\/tutorials\/hummingbird\/todos-2-api#Todo-Controller-and-Repository"},"todos-api-06.swift":{"highlights":[],"content":["import Foundation","","\/\/\/ Concrete implementation of `TodoRepository` that stores everything in memory","actor TodoMemoryRepository: TodoRepository {","    var todos: [UUID: Todo]","","    init() {","        self.todos = [:]","    }","","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo {","        let id = UUID()","        let url = urlPrefix + id.uuidString","        let todo = Todo(id: id, title: title, order: order, url: url, completed: false)","        self.todos[id] = todo","        return todo","    }","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo? {","        return self.todos[id]","    }","    \/\/\/ List all todos","    func list() async throws -> [Todo] {","        return self.todos.values.map { $0 }","    }","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo? {","        if var todo = self.todos[id] {","            if let title {","                todo.title = title","            }","            if let order {","                todo.order = order","            }","            if let completed {","                todo.completed = completed","            }","            self.todos[id] = todo","            return todo","        }","        return nil","    }","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool {","        if self.todos[id] != nil {","            self.todos[id] = nil","            return true","        }","        return false","    }","    \/\/\/ Delete all todos","    func deleteAll() async throws {","        self.todos = [:]","    }","","}"],"identifier":"todos-api-06.swift","fileType":"swift","fileName":"Sources\/App\/Repositories\/TodoMemoryRepository.swift","type":"file","syntax":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing":{"estimatedTime":"15min","title":"Testing your application","abstract":[{"type":"text","text":"Test your application using the HummingbirdTesting framework"}],"kind":"project","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","role":"project","type":"topic","url":"\/tutorials\/hummingbird\/todos-3-testing"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Store-Todos-in-a-database":{"role":"article","type":"topic","title":"Store Todos in a database","url":"\/tutorials\/todos\/store-todos-in-a-database","abstract":[],"kind":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres":{"estimatedTime":"15min","title":"Use PostgresNIO to store your Todos in a Postgres database","abstract":[{"type":"text","text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO."}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres","kind":"project","role":"project","type":"topic","url":"\/tutorials\/hummingbird\/todos-4-postgres"},"todos-api-21.sh":{"fileType":"","fileName":"Test update","identifier":"todos-api-21.sh","syntax":"","type":"file","highlights":[{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16}],"content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Mon, 9 Sep 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 330","Date: Mon, 9 Sep 2024 11:50:26 GMT","","[{\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\"},{\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}]",""]},"todos-api-24.sh":{"highlights":[{"line":9},{"line":10},{"line":11},{"line":12},{"line":13}],"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:52:19 GMT"],"identifier":"todos-api-24.sh","fileName":"Test delete","fileType":"","type":"file","syntax":""},"todos-template-06.swift":{"fileType":"swift","fileName":"Sources\/App\/Application+build.swift","identifier":"todos-template-06.swift","type":"file","syntax":"swift","highlights":[],"content":["\/\/\/ Build router","func buildRouter() -> Router<AppRequestContext> {","    let router = Router(context: AppRequestContext.self)","    \/\/ Add middleware","    router.addMiddleware {","        \/\/ logging middleware","        LogRequestsMiddleware(.info)","    }","    \/\/ Add default endpoint","    router.get(\"\/\") { _,_ in","        return \"Hello!\"","    }","    return router","}"]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-your-Postgres-database":{"title":"Setup your Postgres database","abstract":[{"type":"text","text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO."}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database","kind":"section","role":"pseudoSymbol","type":"section","url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-your-Postgres-database"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Testing-your-application":{"role":"article","type":"topic","title":"Testing your application","url":"\/tutorials\/todos\/testing-your-application","abstract":[],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","kind":"article"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-a-Postgres-repository":{"title":"Setup a Postgres repository","abstract":[{"type":"text","text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO."}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository","role":"pseudoSymbol","type":"section","url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-a-Postgres-repository"},"todos-api-20.sh":{"highlights":[],"content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Mon, 9 Sep 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"],"identifier":"todos-api-20.sh","fileName":"Test update","type":"file","fileType":"","syntax":""},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Testing-your-application-with-curl":{"role":"pseudoSymbol","type":"section","title":"Testing your application with curl","url":"\/tutorials\/hummingbird\/todos-2-api#Testing-your-application-with-curl","abstract":[{"type":"text","text":"Add some functionality to your application."}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl"},"todos-api-11.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-11.swift","type":"file","syntax":"swift","highlights":[],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"]},"todos-api-05.swift":{"highlights":[],"content":["import Foundation","","\/\/\/ Interface for storing and editing todos","protocol TodoRepository: Sendable {","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo?","    \/\/\/ List all todos","    func list() async throws -> [Todo]","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo?","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool","    \/\/\/ Delete all todos","    func deleteAll() async throws","}"],"identifier":"todos-api-05.swift","fileName":"Sources\/App\/Repositories\/TodoRepository.swift","type":"file","fileType":"swift","syntax":"swift"},"https://www.geeksforgeeks.org/repository-design-pattern/":{"title":"repository design pattern","identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/","type":"link","titleInlineContent":[{"type":"text","text":"repository design pattern"}],"url":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/"},"todos-api-14.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-14.swift","syntax":"swift","type":"file","highlights":[{"line":12},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    \/\/\/ Get list of todos endpoint","    @Sendable func list(request: Request, context: some RequestContext) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> EditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return EditedResponse(status: .created, response: todo)","    }","}"]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Test-your-application":{"role":"pseudoSymbol","type":"section","title":"Test your application","url":"\/tutorials\/hummingbird\/todos-3-testing#Test-your-application","abstract":[{"type":"text","text":"Test your application using the HummingbirdTesting framework"}],"kind":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-your-application"},"todos-api-22.sh":{"highlights":[],"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT"],"identifier":"todos-api-22.sh","fileType":"","type":"file","fileName":"Test delete","syntax":""},"todos-api-18.sh":{"fileType":"","fileName":"Test create and get","identifier":"todos-api-18.sh","syntax":"","type":"file","highlights":[],"content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Mon, 9 Sep 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Mon, 9 Sep 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"]},"doc://com.opticalaberration.hummingbird/tutorials/Todos/API-Setup":{"role":"article","type":"topic","title":"API Setup","url":"\/tutorials\/todos\/api-setup","abstract":[],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","kind":"article"},"todos-api-13.sh":{"highlights":[],"content":["> curl http:\/\/localhost:8080\/todos\/284DC153-4FE9-458D-8A93-6CB60990B2F3","{\"completed\":false,\"title\":\"Read chapter on testing applications\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\"}"],"identifier":"todos-api-13.sh","fileType":"","type":"file","fileName":"Test get","syntax":""},"todos-api-10.swift":{"fileType":"swift","fileName":"Sources\/App\/Controllers\/TodoController.swift","identifier":"todos-api-10.swift","syntax":"swift","type":"file","highlights":[{"line":12},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29}],"content":["import Foundation","import Hummingbird","","struct TodoController<Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ return todo endpoints","    var endpoints: RouteCollection<AppRequestContext> {","        return RouteCollection(context: AppRequestContext.self)","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo endpoint","    @Sendable func get(request: Request, context: some RequestContext) async throws -> Todo? {","        let id = try context.parameters.require(\"id\", as: UUID.self)","        return try await self.repository.get(id: id)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo endpoint","    @Sendable func create(request: Request, context: some RequestContext) async throws -> Todo {","        let request = try await request.decode(as: CreateRequest.self, context: context)","        return try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","    }","}"]},"todos-api-23.sh":{"highlights":[{"line":5},{"line":6},{"line":7},{"line":8}],"content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Mon, 9 Sep 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Mon, 9 Sep 2024 11:51:59 GMT"],"identifier":"todos-api-23.sh","type":"file","fileName":"Test delete","fileType":"","syntax":""}}}